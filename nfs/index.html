<!DOCTYPE html>
<html lang="en">
    <head>
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta http-equiv="content-type" content="text/html; charset=utf-8">

      <!-- Enable responsiveness on mobile devices-->
      <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

      <title> - nfs</title>

      

      
          <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/slideout/1.0.1/slideout.min.js"></script> -->
          <script type="text/javascript" src="https:&#x2F;&#x2F;blog.51hint.com&#x2F;slideout.min.js"></script>
          
      

      
          <link rel="stylesheet" href="https:&#x2F;&#x2F;blog.51hint.com&#x2F;site.css">
          
      

      
      
    </head>

    <body>
        <div class="container">

            <div id="mobile-navbar" class="mobile-navbar">
              <div class="mobile-header-logo">
                <a href="/" class="logo">ITæŠ€æœ¯åˆ†äº«</a>
              </div>
              <div class="mobile-navbar-icon icon-out">
                <span></span>
                <span></span>
                <span></span>
              </div>
            </div>

            <nav id="mobile-menu" class="mobile-menu slideout-menu slideout-menu-left">
              <ul class="mobile-menu-list">
                
                    <li class="mobile-menu-item">
                        <a href="https:&#x2F;&#x2F;blog.51hint.com">
                            Home
                        </a>
                    </li>
                
                    <li class="mobile-menu-item">
                        <a href="https:&#x2F;&#x2F;blog.51hint.com&#x2F;categories">
                            Categories
                        </a>
                    </li>
                
                    <li class="mobile-menu-item">
                        <a href="https:&#x2F;&#x2F;blog.51hint.com&#x2F;tags">
                            Tags
                        </a>
                    </li>
                
                    <li class="mobile-menu-item">
                        <a href="https:&#x2F;&#x2F;blog.51hint.com&#x2F;about">
                            About
                        </a>
                    </li>
                
              </ul>
            </nav>

            <header id="header">
                <div class="logo"><a href="https:&#x2F;&#x2F;blog.51hint.com">ITæŠ€æœ¯åˆ†äº«</a></div>
                <nav class="menu">
                    <ul>
                        
                            <li>
                                <a href="https:&#x2F;&#x2F;blog.51hint.com">
                                    Home
                                </a>
                            </li>
                        
                            <li>
                                <a href="https:&#x2F;&#x2F;blog.51hint.com&#x2F;categories">
                                    Categories
                                </a>
                            </li>
                        
                            <li>
                                <a href="https:&#x2F;&#x2F;blog.51hint.com&#x2F;tags">
                                    Tags
                                </a>
                            </li>
                        
                            <li>
                                <a href="https:&#x2F;&#x2F;blog.51hint.com&#x2F;about">
                                    About
                                </a>
                            </li>
                        
                    </ul>

                    <div class="search-container">
                        <input id="search" type="search" placeholder="ğŸ” Search the docs">
    
                        <div class="search-results">
                            <div class="search-results__items"></div>
                        </div>
                    </div>

                </nav>
            </header>

            <main>
                <div class="content" id="mobile-panel">
                    



<article class="post">
    
    <header class="post__header">
        <h1 class="post__title">
            <a href="https:&#x2F;&#x2F;blog.51hint.com&#x2F;nfs&#x2F;">nfs</a>
        </h1>
        <div class="post__meta">
            <span class="post__time">2021-06-17</span>
            
        </div>
    </header>

    <div class="post-content">
      <p>nfsæœåŠ¡å™¨å…±äº«å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨å­˜å‚¨ä¸€è‡´</p>
<span id="continue-reading"></span>
<p>ä¸€ã€mac æœåŠ¡</p>
<pre style="background-color:#2b303b;">
<code class="language-bash" data-lang="bash"><span style="color:#c0c5ce;">    </span><span style="color:#bf616a;">sudo</span><span style="color:#c0c5ce;"> nfsd restart 
    </span><span style="color:#bf616a;">sudo</span><span style="color:#c0c5ce;"> nfsd status
    </span><span style="color:#bf616a;">sudo</span><span style="color:#c0c5ce;"> nfsd update
    </span><span style="color:#bf616a;">sudo</span><span style="color:#c0c5ce;"> showmount</span><span style="color:#bf616a;"> -e 
    sudo</span><span style="color:#c0c5ce;"> nfsd checkexports

    </span><span style="color:#bf616a;">sudo</span><span style="color:#c0c5ce;"> vi /etc/exports  </span><span style="color:#65737e;">##ç¼–è¾‘/etc/exports        
</span><span style="color:#c0c5ce;">        /Users/guo/www</span><span style="color:#bf616a;"> -alldirs -maproot</span><span style="color:#c0c5ce;">=root:wheel</span><span style="color:#bf616a;"> -network</span><span style="color:#c0c5ce;">=192.168.50.0</span><span style="color:#bf616a;"> -mask</span><span style="color:#c0c5ce;">=255.255.255.0
        </span><span style="color:#65737e;">#/Users/guo/www -alldirs -rw -network 192.168.50.0 -mask 255.255.255.0

    </span><span style="color:#bf616a;">sudo</span><span style="color:#c0c5ce;"> nfsd checkexports
</span></code></pre>
<p>äºŒã€centos å®¢æˆ·ç«¯</p>
<pre style="background-color:#2b303b;">
<code class="language-bash" data-lang="bash"><span style="color:#c0c5ce;">    </span><span style="color:#bf616a;">rpcinfo -p
    rpm -qa </span><span style="color:#c0c5ce;">|</span><span style="color:#bf616a;">grep</span><span style="color:#c0c5ce;"> nfs-utils
    </span><span style="color:#bf616a;">yum -y</span><span style="color:#c0c5ce;"> install nfs-utils
    </span><span style="color:#bf616a;">systemctl</span><span style="color:#c0c5ce;"> start nfs-utils
    </span><span style="color:#bf616a;">systemctl</span><span style="color:#c0c5ce;"> enable  nfs-utils
    </span><span style="color:#bf616a;">rpcinfo -p

    showmount -e</span><span style="color:#c0c5ce;"> 192.168.50.156
    </span><span style="color:#bf616a;">sudo</span><span style="color:#c0c5ce;"> mount</span><span style="color:#bf616a;"> -t</span><span style="color:#c0c5ce;"> nfs</span><span style="color:#bf616a;"> -o</span><span style="color:#c0c5ce;"> nolock,nfsvers=3,vers=3 192.168.50.156:/Users/guo/www /www
</span></code></pre><br/>
<hr />
<p>ä¸‰ã€centos æœåŠ¡</p>
<pre style="background-color:#2b303b;">
<code class="language-bash" data-lang="bash"><span style="color:#bf616a;">rpm -qa </span><span style="color:#c0c5ce;">| </span><span style="color:#bf616a;">grep</span><span style="color:#c0c5ce;"> rpcbind
</span><span style="color:#bf616a;">rpm -qa </span><span style="color:#c0c5ce;">| </span><span style="color:#bf616a;">grep</span><span style="color:#c0c5ce;"> nfs 
</span><span style="color:#bf616a;">yum</span><span style="color:#c0c5ce;"> install</span><span style="color:#bf616a;"> -y</span><span style="color:#c0c5ce;"> rpcbind nfs-utils
</span><span style="color:#bf616a;">systemctl</span><span style="color:#c0c5ce;"> enable rpcbind
</span><span style="color:#bf616a;">systemctl</span><span style="color:#c0c5ce;"> enable nfs-server
</span><span style="color:#bf616a;">systemctl</span><span style="color:#c0c5ce;"> restart rpcbind
</span><span style="color:#bf616a;">systemctl</span><span style="color:#c0c5ce;"> restart nfs-server
</span><span style="color:#bf616a;">sudo</span><span style="color:#c0c5ce;"> firewall-cmd</span><span style="color:#bf616a;"> --zone</span><span style="color:#c0c5ce;">=public</span><span style="color:#bf616a;"> --permanent --add-service</span><span style="color:#c0c5ce;">={rpc-bind,mountd,nfs}
</span><span style="color:#bf616a;">sudo</span><span style="color:#c0c5ce;"> firewall-cmd</span><span style="color:#bf616a;"> --reload


sudo</span><span style="color:#c0c5ce;"> chown</span><span style="color:#bf616a;"> -R</span><span style="color:#c0c5ce;"> nfsnobody:nfsnobody /home/nfs-share    </span><span style="color:#65737e;">#nfsnobody ç”¨æˆ·ç»„æ˜¯ nfs-util å®‰è£…åŒ…åˆ›å»ºçš„
</span><span style="color:#c0c5ce;">sudo vim /etc/exports
</span><span style="color:#bf616a;">/home/nfs-share </span><span style="color:#c0c5ce;">*(rw,sync,all_squash,anonuid=65534,anongid=65534)   </span><span style="color:#65737e;">#nfsnobody 65534
</span><span style="color:#c0c5ce;">/home/wwwroot *(rw,sync,all_squash,anonuid=1001,anongid=1001)       </span><span style="color:#65737e;">#www 1001

</span><span style="color:#bf616a;">exportfs -arv
showmount -e</span><span style="color:#c0c5ce;"> localhost
</span></code></pre>
<p>å››ã€centos å®¢æˆ·ç«¯ </p>
<pre style="background-color:#2b303b;">
<code class="language-bash" data-lang="bash"><span style="color:#bf616a;">sudo</span><span style="color:#c0c5ce;"> yum install nfs-utils
</span><span style="color:#bf616a;">sudo</span><span style="color:#c0c5ce;"> systemctl enable rpcbind
</span><span style="color:#bf616a;">systemctl</span><span style="color:#c0c5ce;"> restart rpcbind
</span><span style="color:#bf616a;">showmount -e</span><span style="color:#c0c5ce;"> 192.168.1.3
</span><span style="color:#bf616a;">mount -t</span><span style="color:#c0c5ce;"> nfs</span><span style="color:#bf616a;"> -o</span><span style="color:#c0c5ce;"> nosuid,noexec,nodev,rw,bg,soft,rsize=32768,wsize=32768 192.168.50.57:/home/nfs-share /nfs/
</span></code></pre>
<p>â€‹</p>
<p>äº”ã€ macå®¢æˆ·ç«¯</p>
<p>â€‹    <code>sudo mount_nfs -o resvport 192.168.50.57:/home/nfs-share /tmp/nfs/</code></p>
<br/>
<br/>
<hr />
<p><strong>æœåŠ¡å™¨æŒ‡å®šuidå’Œgid</strong></p>
<pre style="background-color:#2b303b;">
<code class="language-bash" data-lang="bash"><span style="color:#bf616a;">/home/upload</span><span style="color:#c0c5ce;"> 192.168.100.0/24(rw,sync,all_squash,anonuid=210,anongid=210)
</span><span style="color:#bf616a;">groupadd -g</span><span style="color:#c0c5ce;"> 210 nfs-upload
</span><span style="color:#bf616a;">useradd -g</span><span style="color:#c0c5ce;"> 210</span><span style="color:#bf616a;"> -u</span><span style="color:#c0c5ce;"> 210</span><span style="color:#bf616a;"> -M</span><span style="color:#c0c5ce;"> nfs-upload
</span><span style="color:#bf616a;">mkdir -p</span><span style="color:#c0c5ce;"> /home/upload
</span><span style="color:#bf616a;">chown -R</span><span style="color:#c0c5ce;"> nfs-upload:nfs-upload /home/upload
</span></code></pre>
<p><strong>NFS æœåŠ¡å™¨å…³æœºå‰çš„æ³¨æ„äº‹é¡¹ï¼š</strong></p>
<blockquote>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œç”±äº NFS ä½¿ç”¨çš„è¿™ä¸ª RPC æœåŠ¡ï¼Œå½“å®¢æˆ·ç«¯è¿ä¸ŠæœåŠ¡å™¨æ—¶ï¼Œé‚£ä¹ˆä½ çš„æœåŠ¡å™¨æƒ³è¦å…³æœºï¼Œ é‚£å¯å°±ä¼šæˆä¸ºã€ä¸å¯èƒ½çš„ä»»åŠ¡ã€ï¼å¦‚æœä½ çš„æœåŠ¡å™¨ä¸Šé¢è¿˜æœ‰å®¢æˆ·ç«¯åœ¨è”æœºï¼Œé‚£ä¹ˆä½ è¦å…³æœºï¼Œ å¯èƒ½å¾—è¦ç­‰åˆ°æ•°ä¸ªé’Ÿå¤´æ‰èƒ½å¤Ÿæ­£å¸¸çš„å…³æœºæˆåŠŸï¼å—„ï¼çœŸçš„å‡çš„ï¼ä¸ç›¸ä¿¡å—ï¼Ÿä¸ç„¶ä½ è‡ªä¸ªå„¿è¯•è¯•çœ‹ï¼^_^ï¼</p>
</blockquote>
<blockquote>
<p>æ‰€ä»¥å•°ï¼Œå»ºè®®ä½ çš„ NFS Server æƒ³è¦å…³æœºä¹‹å‰ï¼Œèƒ½å…ˆã€å…³æ‰ rpcbind ä¸ nfs ã€è¿™ä¸¤ä¸ªä¸œè¥¿ï¼ å¦‚æœæ— æ³•æ­£ç¡®çš„å°†è¿™ä¸¤ä¸ª daemons å…³æ‰ï¼Œé‚£ä¹ˆå…ˆä»¥ netstat -utlp æ‰¾å‡º PID ï¼Œç„¶åä»¥ kill å°†ä»–å…³æ‰å…ˆï¼è¿™æ ·æ‰æœ‰åŠæ³•æ­£å¸¸çš„å…³æœºæˆåŠŸå–”ï¼è¿™ä¸ªè¯·ç‰¹åˆ«ç‰¹åˆ«çš„æ³¨æ„å‘¢ï¼</p>
</blockquote>

    </div>

    
    

    <div class="post-footer">
        
            
                <div class="post-tags">
                    
                        <a href="https:&#x2F;&#x2F;blog.51hint.com&#x2F;tags&#x2F;linux&#x2F;">#linux</a>
                    
                </div>
            
            
                <div class="post-nav">
                    
                        <a class="previous" href="https:&#x2F;&#x2F;blog.51hint.com&#x2F;mirros&#x2F;">â€¹ æ›´æ–°æº</a>
                    
                    
                        <a class="next" href="https:&#x2F;&#x2F;blog.51hint.com&#x2F;lnmp&#x2F;">lnmp â€º</a>
                    
                    
                    
                </div>
            

        

    </div>

    
    
</article>


                </div>
            </main>

            
            
        </div>

      
          <script type="text/javascript" src="https:&#x2F;&#x2F;blog.51hint.com&#x2F;even.js" ></script>

          <script type="text/javascript" src="https:&#x2F;&#x2F;blog.51hint.com&#x2F;elasticlunr.min.js"></script>
          <script type="text/javascript" src="https:&#x2F;&#x2F;blog.51hint.com&#x2F;search_index.en.js"></script>
          <script type="text/javascript" src="https:&#x2F;&#x2F;blog.51hint.com&#x2F;search.js"></script>



      
    </body>

</html>
